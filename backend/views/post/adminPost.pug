doctype html
html(lang="en")
    head
        meta(charset="UTF-8")
        meta(http-equiv="X-UA-Compatible", content="IE=edge")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")

        link(rel="preconnect", href="https://fonts.googleapis.com")
        link(rel="preconnect", href="https://fonts.gstatic.com" crossorigin)
        link(href="https://fonts.googleapis.com/css2?family=Estonia&family=Mulish:ital,wght@0,400;1,700&family=Raleway:ital,wght@0,400;1,700&family=Roboto+Slab&display=swap" rel="stylesheet")

  

        link(rel="stylesheet", href="/../css/styles.css")
        link(rel="stylesheet", href="/../css/post.css")
        link(rel="icon", href="/img/luna.png", type="image/x-icon")
        title Publicaciones - #{titulo}
       
    body 

        
  
        header.flex-between 
            .flex-center 
                img(class="logo" src="/../img/logito3.jpg")
                span(class="span-autor") Master Reiki Usui Rose Mary Alvez
                img( class="img-menu" src="/../img/menu.png" alt="Icono menu")
            
            nav.menu 
                ul(class="flex-around menu-lista")
                    li
                        a(href=`/auth/${usuario}/index`) Inicio
                    li
                        a(class="ref-crear" href=`/auth/${usuario}/crear-post`) Crear Publicacion
                    li
                        a(href="#") Nosotros
                    li 
                        a(href=`/auth/${usuario}/perfil`) Perfil #{miniName}
                    li 
                        a(class="logout") Cerrar Sesión
                    li
                        div(class="li-btn-notificaciones") 
                            img(src="/../img/notificacion.png" class="icono-notificacion")
                            span(class="notificacion-numero notificacion-numero-normal") !{ cantidad_notificaciones }

    
        div(class="container")
            div(class="pagina-post")
                .contenido-post 
                
                    .contenedor-flex 
                        h1(class="titulo-post") #{titulo} 
                        div.algo
                            a(href=`/auth/${usuario}/editar/${url}`)
                                button(class=`editar`) Editar
                            a(href=`/auth/${usuario}/eliminar/${url}`)
                                img(src="/../img/eliminar.png" class="img-eliminar")
                             
                    .contenedor-imagen
                        img(src=`${imagen}`, alt="" class="foto-post" id="imagen")
                    .contenedor-flex 
                        p.autor-post Escrito por
                            strong.autor-post  #{autor}
                        p.fecha-post #{fecha}

                   
                    .contenedor-flex 
                        ul(class="texto-post") 
                            -let dataID = 1
                            each  val in contenido
                                li !{val}
                 
                    .contenedor-comentarios
                        h3 Comentarios (!{numComentarios})
                        each comentario in comentarios 
                            div(class="div-comentario-header flex-between" )
                                .user-img
                                    img(src=`${comentario.imagen_usuario}`)
                                    span.comentario-usuario= comentario.usuario
                                span.comentario-fecha= comentario.fecha
                            span.comentario-mensaje= comentario.mensaje
                            div(class="comentario-actions" data-id=comentario.id)
                                span(class="editar-comentario") Editar
                                span(class="eliminar-comentario") Eliminar 
                    
                    .seccion-comentarios 
                        div(class="img-user" )
                            //img(src=`${usuario_perfil}`, alt="foto del perfil del usuario" class="avatar-user")
                            div( class="avatar-user" style={"background-image":`url(${ usuario_perfil })`, "background-position": "50% 45%", "background-size" : "62px 62px" })
                            label Nombre
                            input(type="text" name="user" id="" class="input-user-name" value=`${usuario}`) 
                            label(class="label-admin" style="display: none") !{ admin_post }


                        .contenido-comentario 
                            label(for="") Comentario
                                div 
                                    textarea(name="" class="comentario") 
                        button(class="btn-comentario") Publicar Comentario

        // NOTIFICACIONES   
        div(class="contenedor-notificaciones")
            div(class="titulo-notificaciones") 
                h3 Notificaciones
            ul(class="lista-notificaciones") 
                each notificacion in notificaciones 
                    li.li-notificacion
                        a(href=`/auth/elgero16/publicaciones/${ notificacion.url_publicacion }`)  
                            div(class="div-notificacion flex-between") 
                                div(class="img-user")
                                    img(src=`${ notificacion.imagen_remitente }`, alt="" class="avatar-notificacion")
                                div(class="div-mensaje-notificacion ")
                                    p(class="mensaje-notificacion") 
                                        strong !{ notificacion.nombre_remitente } 
                                        span ha comentado tu Publicación : "!{ notificacion.mensaje }..." 
                                    span(class="fecha-mensaje-notificacion")  !{ notificacion.fecha } 
                                    br/
                                    span(class="fecha-mensaje-notificacion") a las !{ notificacion.hora }
                                    
                 
        nav.menu-phone.ocultar-transition
                ul(class="flex-column text-align-center menu-lista-phone ")
                    li
                        a(href=`/auth/${usuario}/index`) Inicio
                    li
                        a(class="ref-crear" href=`/auth/${usuario}/crear-post`)  Crear Publicacion
                    li
                        a(href="#") Nosotros
                    li
                        a(href=`/auth/${usuario}/perfil`) Perfil #{miniName}
                    li 
                        a(class="logout") Cerrar Sesión
                    li
                        div(class="li-notificaciones-mobile") 
                            span Notificaciones
                            span(class="notificacion-numero  notificacion-numero-mobile") !{ cantidad_notificaciones }  
                    
                               
                    
   
    script(src="/../js/middlewares-front.js") 
    script(src="/../js/post-front.js") 
                     